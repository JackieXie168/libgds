<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GDS - Generic Data Structures: main.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>main.c</h1><a href="main_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">// ==================================================================</span>
00002 <span class="comment">// @(#)main.c</span>
00003 <span class="comment">//</span>
00004 <span class="comment">// Generic Data Structures (libgds): validation application.</span>
00005 <span class="comment">//</span>
00006 <span class="comment">// @author Bruno Quoitin (bqu@infonet.fundp.ac.be)</span>
00007 <span class="comment">// @lastdate 25/07/2003</span>
00008 <span class="comment">// ==================================================================</span>
00009 
00010 <span class="preprocessor">#include &lt;assert.h&gt;</span>
00011 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00012 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00013 
00014 <span class="preprocessor">#include &lt;<a class="code" href="array_8h.html">array.h</a>&gt;</span>
00015 <span class="preprocessor">#include &lt;<a class="code" href="list_8h.html">list.h</a>&gt;</span>
00016 <span class="preprocessor">#include &lt;<a class="code" href="memory_8h.html">memory.h</a>&gt;</span>
00017 <span class="preprocessor">#include &lt;<a class="code" href="radix-tree_8h.html">radix-tree.h</a>&gt;</span>
00018 <span class="preprocessor">#include &lt;<a class="code" href="str__util_8h.html">str_util.h</a>&gt;</span>
00019 <span class="preprocessor">#include &lt;<a class="code" href="tokenizer_8h.html">tokenizer.h</a>&gt;</span>
00020 
00021 <span class="comment">//#define _CHECK_ARRAY_</span>
00022 <span class="comment">//#define _CHECK_PTR_ARRAY_</span>
00023 <span class="comment">//#define _CHECK_LIST_</span>
00024 <span class="comment">//#define _CHECK_RADIX_TREE_</span>
<a name="l00025"></a><a class="code" href="main_8c.html#a0">00025</a> <span class="preprocessor">#define _CHECK_TOKENIZER_</span>
00026 <span class="preprocessor"></span>
00027 <span class="comment">// ----- test_array -------------------------------------------------</span>
<a name="l00031"></a><a class="code" href="main_8c.html#a1">00031</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="main_8c.html#a1">test_array</a>()
00032 {
00033   <a class="code" href="structSIntArray.html">SIntArray</a> * pArray, * pArrayCopy;
00034   <span class="keywordtype">int</span> iIndex;
00035   <span class="keywordtype">int</span> iData;
00036 
00037   pArray= <a class="code" href="array_8h.html#a1">int_array_create</a>(<a class="code" href="array_8h.html#a0">ARRAY_OPTION_SORTED</a>);
00038   iData= 27;
00039   assert(<a class="code" href="array_8h.html#a6">int_array_add</a>(pArray, &amp;iData) == 0);
00040   iData= 33;
00041   assert(<a class="code" href="array_8h.html#a6">int_array_add</a>(pArray, &amp;iData) == 0);
00042   iData= 5;
00043   assert(<a class="code" href="array_8h.html#a6">int_array_add</a>(pArray, &amp;iData) == 0);
00044   iData= 3;
00045   assert(<a class="code" href="array_8h.html#a6">int_array_add</a>(pArray, &amp;iData) == 0);
00046   iData= 7;
00047   assert(<a class="code" href="array_8h.html#a6">int_array_add</a>(pArray, &amp;iData) == 0);
00048   <span class="keywordflow">for</span> (iIndex= 0; iIndex &lt; <a class="code" href="array_8h.html#a3">int_array_length</a>(pArray); iIndex++) {
00049     printf(<span class="stringliteral">"(%d)&gt;--&gt;%d\n"</span>, iIndex, pArray-&gt;<a class="code" href="structSIntArray.html#o0">data</a>[iIndex]);
00050   }
00051   pArrayCopy= (<a class="code" href="structSIntArray.html">SIntArray</a> *) <a class="code" href="array_8c.html#a14">_array_copy</a>((<a class="code" href="structSArray.html">SArray</a> *) pArray);
00052   <a class="code" href="array_8h.html#a2">int_array_destroy</a>(&amp;pArray);
00053   <a class="code" href="array_8h.html#a8">int_array_remove_at</a>(pArrayCopy, 1);
00054   <span class="keywordflow">for</span> (iIndex= 0; iIndex &lt; <a class="code" href="array_8h.html#a3">int_array_length</a>(pArrayCopy); iIndex++) {
00055     printf(<span class="stringliteral">"(%d)&gt;--&gt;%d\n"</span>, iIndex, pArrayCopy-&gt;<a class="code" href="structSIntArray.html#o0">data</a>[iIndex]);
00056   }
00057   <a class="code" href="array_8h.html#a2">int_array_destroy</a>(&amp;pArrayCopy);
00058   printf(<span class="stringliteral">"array-test: done.\n"</span>);
00059 }
00060 
<a name="l00061"></a><a class="code" href="structSPtrArrayItem.html">00061</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00062"></a><a class="code" href="structSPtrArrayItem.html#o1">00062</a>   uint16_t uHighID, uLowID;
<a name="l00063"></a><a class="code" href="structSPtrArrayItem.html#o2">00063</a>   uint8_t uData;
00064 } <a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a>;
00065 
00066 <span class="comment">// ----- array_ptr_item_create --------------------------------------</span>
<a name="l00067"></a><a class="code" href="main_8c.html#a2">00067</a> <a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> * <a class="code" href="main_8c.html#a2">array_ptr_item_create</a>(uint16_t uHighID,
00068                                       uint16_t uLowID,
00069                                       uint8_t uData)
00070 {
00071   <a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> * pItem=
00072     (<a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> *) <a class="code" href="memory_8h.html#a0">MALLOC</a>(<span class="keyword">sizeof</span>(<a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a>));
00073 
00074   pItem-&gt;<a class="code" href="structSPtrArrayItem.html#o0">uHighID</a>= uHighID;
00075   pItem-&gt;<a class="code" href="structSPtrArrayItem.html#o1">uLowID</a>= uLowID;
00076   pItem-&gt;<a class="code" href="structSPtrArrayItem.html#o2">uData</a>= uData;
00077   <span class="keywordflow">return</span> pItem;
00078 }
00079 
00080 <span class="comment">// ----- array_ptr_compare_function ---------------------------------</span>
<a name="l00081"></a><a class="code" href="main_8c.html#a3">00081</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#a3">array_ptr_compare_function</a>(<span class="keywordtype">void</span> * pItem1, <span class="keywordtype">void</span> * pItem2,
00082                                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> uEltSize)
00083 {
00084   <a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> * pRealItem1= *((<a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> **) pItem1);
00085   <a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> * pRealItem2= *((<a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> **) pItem2);
00086 
00087   printf(<span class="stringliteral">"[%d:%d] vs [%d:%d]\n"</span>,
00088          pRealItem1-&gt;<a class="code" href="structSPtrArrayItem.html#o0">uHighID</a>, pRealItem1-&gt;<a class="code" href="structSPtrArrayItem.html#o1">uLowID</a>,
00089          pRealItem2-&gt;<a class="code" href="structSPtrArrayItem.html#o0">uHighID</a>, pRealItem2-&gt;<a class="code" href="structSPtrArrayItem.html#o1">uLowID</a>);
00090 
00091   <span class="keywordflow">if</span> (pRealItem1-&gt;<a class="code" href="structSPtrArrayItem.html#o0">uHighID</a> &lt; pRealItem2-&gt;<a class="code" href="structSPtrArrayItem.html#o0">uHighID</a>)
00092     <span class="keywordflow">return</span> -1;
00093   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pRealItem1-&gt;<a class="code" href="structSPtrArrayItem.html#o0">uHighID</a> &gt; pRealItem2-&gt;<a class="code" href="structSPtrArrayItem.html#o0">uHighID</a>)
00094     <span class="keywordflow">return</span> 1;
00095   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pRealItem1-&gt;<a class="code" href="structSPtrArrayItem.html#o1">uLowID</a> &lt; pRealItem2-&gt;<a class="code" href="structSPtrArrayItem.html#o1">uLowID</a>)
00096     <span class="keywordflow">return</span> -1;
00097   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pRealItem1-&gt;<a class="code" href="structSPtrArrayItem.html#o1">uLowID</a> &gt; pRealItem2-&gt;<a class="code" href="structSPtrArrayItem.html#o1">uLowID</a>)
00098     <span class="keywordflow">return</span> 1;
00099   <span class="keywordflow">else</span>
00100     <span class="keywordflow">return</span> 0;
00101 }
00102 
00103 <span class="comment">// ----- array_ptr_destroy_function ---------------------------------</span>
<a name="l00104"></a><a class="code" href="main_8c.html#a4">00104</a> <span class="keywordtype">void</span> <a class="code" href="main_8c.html#a4">array_ptr_destroy_function</a>(<span class="keywordtype">void</span> * pItem)
00105 {
00106   <a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> * pRealItem= *((<a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> **) pItem);
00107 
00108   <a class="code" href="memory_8h.html#a2">FREE</a>(pRealItem);
00109 }
00110 
00111 <span class="comment">// ----- test_ptr_array ---------------------------------------------</span>
<a name="l00115"></a><a class="code" href="main_8c.html#a5">00115</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="main_8c.html#a5">test_ptr_array</a>()
00116 {
00117   <a class="code" href="structSPtrArray.html">SPtrArray</a> * pPtrArray;
00118   <a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> * pItem;
00119   <span class="keywordtype">int</span> iIndex;
00120 
00121   pPtrArray= <a class="code" href="array_8h.html#a12">ptr_array_create</a>(<a class="code" href="array_8h.html#a0">ARRAY_OPTION_SORTED</a>,
00122                               <a class="code" href="main_8c.html#a3">array_ptr_compare_function</a>,
00123                               <a class="code" href="main_8c.html#a4">array_ptr_destroy_function</a>);
00124   pItem= <a class="code" href="main_8c.html#a2">array_ptr_item_create</a>(5, 2, 1);
00125   <a class="code" href="array_8h.html#a17">ptr_array_add</a>(pPtrArray, &amp;pItem);
00126   pItem= <a class="code" href="main_8c.html#a2">array_ptr_item_create</a>(5, 1, 2);
00127   <a class="code" href="array_8h.html#a17">ptr_array_add</a>(pPtrArray, &amp;pItem);
00128   pItem= <a class="code" href="main_8c.html#a2">array_ptr_item_create</a>(4, 2, 3);
00129   <a class="code" href="array_8h.html#a17">ptr_array_add</a>(pPtrArray, &amp;pItem);
00130   pItem= <a class="code" href="main_8c.html#a2">array_ptr_item_create</a>(6, 2, 4);
00131   <a class="code" href="array_8h.html#a17">ptr_array_add</a>(pPtrArray, &amp;pItem);
00132   <span class="keywordflow">for</span> (iIndex= 0; iIndex &lt; <a class="code" href="array_8h.html#a14">ptr_array_length</a>(pPtrArray);
00133        iIndex++) {
00134     pItem= (<a class="code" href="structSPtrArrayItem.html">SPtrArrayItem</a> *) pPtrArray-&gt;<a class="code" href="structSPtrArray.html#o0">data</a>[iIndex];
00135     printf(<span class="stringliteral">"(%d)&gt;--&gt;[%d:%d], %d\n"</span>, iIndex,
00136            pItem-&gt;<a class="code" href="structSPtrArrayItem.html#o0">uHighID</a>, pItem-&gt;<a class="code" href="structSPtrArrayItem.html#o1">uLowID</a>, pItem-&gt;<a class="code" href="structSPtrArrayItem.html#o2">uData</a>);
00137   }
00138   <a class="code" href="array_8h.html#a13">ptr_array_destroy</a>(&amp;pPtrArray);
00139   printf(<span class="stringliteral">"array-ptr-test: done.\n"</span>);
00140 }
00141 
00142 <span class="comment">// ----- test_list --------------------------------------------------</span>
<a name="l00146"></a><a class="code" href="main_8c.html#a6">00146</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="main_8c.html#a6">test_list</a>()
00147 {
00148   <a class="code" href="structSList.html">SList</a> * pList;
00149 
00150   pList= <a class="code" href="list_8c.html#a1">list_create</a>(NULL, NULL, 1);
00151   <a class="code" href="list_8c.html#a2">list_destroy</a>(&amp;pList);
00152   printf(<span class="stringliteral">"list-test: done.\n"</span>);
00153 }
00154 
00155 <span class="comment">// ----- radix_tree_for_each_function -------------------------------</span>
<a name="l00156"></a><a class="code" href="main_8c.html#a7">00156</a> <span class="keywordtype">int</span> <a class="code" href="main_8c.html#a7">radix_tree_for_each_function</a>(uint32_t uKey, uint8_t uKeyLen,
00157                                  <span class="keywordtype">void</span> * pItem, <span class="keywordtype">void</span> * pContext)
00158 {
00159   printf(<span class="stringliteral">"(%d/%d)&gt;--&gt;%d\n"</span>, uKey, uKeyLen, (<span class="keywordtype">int</span>) pItem);
00160   <span class="keywordflow">return</span> 0;
00161 }
00162 
00163 <span class="comment">// ----- test_radix_tree --------------------------------------------</span>
<a name="l00167"></a><a class="code" href="main_8c.html#a8">00167</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="main_8c.html#a8">test_radix_tree</a>()
00168 {
00169   <a class="code" href="structSRadixTree.html">SRadixTree</a> * pTree;
00170 
00171   pTree= <a class="code" href="radix-tree_8c.html#a2">radix_tree_create</a>(4, NULL);
00172   printf(<span class="stringliteral">"add(0/0, 100)\n"</span>);
00173   <a class="code" href="radix-tree_8c.html#a4">radix_tree_add</a>(pTree, 0, 0, (<span class="keywordtype">void</span> *) 100);
00174   printf(<span class="stringliteral">"add(8/1, 200)\n"</span>);
00175   <a class="code" href="radix-tree_8c.html#a4">radix_tree_add</a>(pTree, 8, 1, (<span class="keywordtype">void</span> *) 200);
00176   printf(<span class="stringliteral">"add(0/1, 300)\n"</span>);
00177   <a class="code" href="radix-tree_8c.html#a4">radix_tree_add</a>(pTree, 0, 1, (<span class="keywordtype">void</span> *) 300);
00178   printf(<span class="stringliteral">"add(7/4, 777)\n"</span>);
00179   <a class="code" href="radix-tree_8c.html#a4">radix_tree_add</a>(pTree, 7, 4, (<span class="keywordtype">void</span> *) 777);
00180   printf(<span class="stringliteral">"exact(7/4)&gt;--&gt;%d\n"</span>, (<span class="keywordtype">int</span>) <a class="code" href="radix-tree_8c.html#a6">radix_tree_get_exact</a>(pTree, 7, 4));
00181   printf(<span class="stringliteral">"exact(6/4)&gt;--&gt;%d\n"</span>, (<span class="keywordtype">int</span>) <a class="code" href="radix-tree_8c.html#a6">radix_tree_get_exact</a>(pTree, 6, 4));
00182   printf(<span class="stringliteral">"exact(4/2)&gt;--&gt;%d\n"</span>, (<span class="keywordtype">int</span>) <a class="code" href="radix-tree_8c.html#a6">radix_tree_get_exact</a>(pTree, 4, 2));
00183   printf(<span class="stringliteral">"best(7/4)&gt;--&gt;%d\n"</span>, (<span class="keywordtype">int</span>) <a class="code" href="radix-tree_8c.html#a7">radix_tree_get_best</a>(pTree, 7, 4));
00184   printf(<span class="stringliteral">"best(6/4)&gt;--&gt;%d\n"</span>, (<span class="keywordtype">int</span>) <a class="code" href="radix-tree_8c.html#a7">radix_tree_get_best</a>(pTree, 6, 4));
00185   printf(<span class="stringliteral">"best(4/2)&gt;--&gt;%d\n"</span>, (<span class="keywordtype">int</span>) <a class="code" href="radix-tree_8c.html#a7">radix_tree_get_best</a>(pTree, 4, 2));
00186   <a class="code" href="radix-tree_8c.html#a8">radix_tree_for_each</a>(pTree, <a class="code" href="main_8c.html#a7">radix_tree_for_each_function</a>, NULL);
00187   printf(<span class="stringliteral">"remove(0/1)\n"</span>);
00188   <a class="code" href="radix-tree_8c.html#a5">radix_tree_remove</a>(pTree, 0, 1);
00189   printf(<span class="stringliteral">"add(8/1, 899)\n"</span>);
00190   <a class="code" href="radix-tree_8c.html#a4">radix_tree_add</a>(pTree, 8, 1, (<span class="keywordtype">void</span> *) 899);
00191   <a class="code" href="radix-tree_8c.html#a8">radix_tree_for_each</a>(pTree, <a class="code" href="main_8c.html#a7">radix_tree_for_each_function</a>, NULL);
00192   <a class="code" href="radix-tree_8c.html#a3">radix_tree_destroy</a>(&amp;pTree);
00193   printf(<span class="stringliteral">"radix-tree: done.\n"</span>);
00194 }
00195 
00196 <span class="comment">// ----- test_tokenizer ---------------------------------------------</span>
<a name="l00200"></a><a class="code" href="main_8c.html#a9">00200</a> <span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="main_8c.html#a9">test_tokenizer</a>()
00201 {
00202   <a class="code" href="structSTokenizer.html">STokenizer</a> * pTokenizer= <a class="code" href="tokenizer_8c.html#a18">tokenizer_create</a>(<span class="stringliteral">" \t"</span>, <span class="stringliteral">"\"{"</span>, <span class="stringliteral">"\"}"</span>);
00203   <span class="keywordtype">long</span> <span class="keywordtype">int</span> lValue;
00204   <span class="keywordtype">double</span> dValue;
00205   <a class="code" href="structSPtrArray.html">STokens</a> * pTokens;
00206   <span class="keywordtype">int</span> iIndex;
00207   <span class="keywordtype">int</span> iResult;
00208 
00209   <span class="keywordtype">char</span> * pcTest= <a class="code" href="str__util_8c.html#a1">str_create</a>(<span class="stringliteral">"abc"</span>);
00210   printf(<span class="stringliteral">"[%s]\n"</span>, pcTest);
00211   <a class="code" href="str__util_8c.html#a5">str_append</a>(&amp;pcTest, <span class="stringliteral">"def"</span>);
00212   printf(<span class="stringliteral">"[%s]\n"</span>, pcTest);
00213   <a class="code" href="str__util_8c.html#a6">str_nappend</a>(&amp;pcTest, <span class="stringliteral">"ghijkl"</span>, 3);
00214   printf(<span class="stringliteral">"[%s]\n"</span>, pcTest);
00215   <a class="code" href="str__util_8c.html#a4">str_destroy</a>(&amp;pcTest);
00216 
00217   <a class="code" href="tokenizer_8c.html#a22">tokenizer_perror</a>(stderr, <a class="code" href="tokenizer_8c.html#a21">tokenizer_run</a>(pTokenizer, <span class="stringliteral">"abc def ghi"</span>));
00218   pTokens= <a class="code" href="tokenizer_8c.html#a20">tokenizer_get_tokens</a>(pTokenizer);
00219   <span class="keywordflow">for</span> (iIndex= 0; iIndex &lt; <a class="code" href="tokenizer_8c.html#a13">tokens_get_num</a>(pTokens); iIndex++)
00220     printf(<span class="stringliteral">"(%s)"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, iIndex));
00221   printf(<span class="stringliteral">"\n"</span>);
00222 
00223   <a class="code" href="tokenizer_8c.html#a22">tokenizer_perror</a>(stderr, <a class="code" href="tokenizer_8c.html#a21">tokenizer_run</a>(pTokenizer, <span class="stringliteral">"abc \"def\" ghi"</span>));
00224   pTokens= <a class="code" href="tokenizer_8c.html#a20">tokenizer_get_tokens</a>(pTokenizer);
00225   <span class="keywordflow">for</span> (iIndex= 0; iIndex &lt; <a class="code" href="tokenizer_8c.html#a13">tokens_get_num</a>(pTokens); iIndex++)
00226     printf(<span class="stringliteral">"(%s)"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, iIndex));
00227   printf(<span class="stringliteral">"\n"</span>);
00228 
00229   <a class="code" href="tokenizer_8c.html#a22">tokenizer_perror</a>(stderr, <a class="code" href="tokenizer_8c.html#a21">tokenizer_run</a>(pTokenizer, <span class="stringliteral">"123 abc\"def\"ghi 456"</span>));
00230   pTokens= <a class="code" href="tokenizer_8c.html#a20">tokenizer_get_tokens</a>(pTokenizer);
00231   <span class="keywordflow">for</span> (iIndex= 0; iIndex &lt; <a class="code" href="tokenizer_8c.html#a13">tokens_get_num</a>(pTokens); iIndex++)
00232     printf(<span class="stringliteral">"(%s)"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, iIndex));
00233   printf(<span class="stringliteral">"\n"</span>);
00234 
00235   <a class="code" href="tokenizer_8c.html#a22">tokenizer_perror</a>(stderr, <a class="code" href="tokenizer_8c.html#a21">tokenizer_run</a>(pTokenizer, <span class="stringliteral">"123 abc\"def\"ghi {456}"</span>));
00236   pTokens= <a class="code" href="tokenizer_8c.html#a20">tokenizer_get_tokens</a>(pTokenizer);
00237   <span class="keywordflow">for</span> (iIndex= 0; iIndex &lt; <a class="code" href="tokenizer_8c.html#a13">tokens_get_num</a>(pTokens); iIndex++)
00238     printf(<span class="stringliteral">"(%s)"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, iIndex));
00239   printf(<span class="stringliteral">"\n"</span>);
00240 
00241   <a class="code" href="tokenizer_8c.html#a22">tokenizer_perror</a>(stderr, <a class="code" href="tokenizer_8c.html#a21">tokenizer_run</a>(pTokenizer, <span class="stringliteral">"  in-filter \"\"\"\"\"\""</span>));
00242   pTokens= <a class="code" href="tokenizer_8c.html#a20">tokenizer_get_tokens</a>(pTokenizer);
00243   <span class="keywordflow">for</span> (iIndex= 0; iIndex &lt; <a class="code" href="tokenizer_8c.html#a13">tokens_get_num</a>(pTokens); iIndex++)
00244     printf(<span class="stringliteral">"(%s)"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, iIndex));
00245   printf(<span class="stringliteral">"\n"</span>);
00246 
00247   iResult= <a class="code" href="tokenizer_8c.html#a21">tokenizer_run</a>(pTokenizer, <span class="stringliteral">"abcdef 12345678901 ghijkl 123:45\t-123.456 \"Hello World !\" ceci\" n{'}est pas \"une{ pipe}"</span>);
00248   <span class="keywordflow">if</span> (iResult)
00249     <a class="code" href="tokenizer_8c.html#a22">tokenizer_perror</a>(stderr, iResult);
00250   pTokens= <a class="code" href="tokenizer_8c.html#a20">tokenizer_get_tokens</a>(pTokenizer);
00251   <span class="keywordflow">for</span> (iIndex= 0; iIndex &lt; <a class="code" href="tokenizer_8c.html#a13">tokens_get_num</a>(pTokens); iIndex++)
00252     printf(<span class="stringliteral">"(%s)"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, iIndex));
00253   printf(<span class="stringliteral">"\n"</span>);
00254   printf(<span class="stringliteral">"# tokens: %hu\n"</span>, <a class="code" href="tokenizer_8c.html#a13">tokens_get_num</a>(pTokens));
00255   printf(<span class="stringliteral">"item 0: \"%s\"\n"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, 0));
00256   assert(!<a class="code" href="tokenizer_8c.html#a15">tokens_get_integer_at</a>(pTokens, 1, &amp;lValue));
00257   printf(<span class="stringliteral">"item 1: %ld\n"</span>, lValue);
00258   printf(<span class="stringliteral">"item 2: \"%s\"\n"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, 2));
00259   printf(<span class="stringliteral">"item 3: \"%s\"\n"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, 3));
00260   assert(!<a class="code" href="tokenizer_8c.html#a17">tokens_get_double_at</a>(pTokens, 4, &amp;dValue));
00261   printf(<span class="stringliteral">"item 4: %f\n"</span>, dValue);
00262   printf(<span class="stringliteral">"item 5: \"%s\"\n"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, 5));
00263   printf(<span class="stringliteral">"item 6: \"%s\"\n"</span>, <a class="code" href="tokenizer_8c.html#a14">tokens_get_string_at</a>(pTokens, 6));
00264 
00265 
00266   <a class="code" href="tokenizer_8c.html#a19">tokenizer_destroy</a>(&amp;pTokenizer);
00267 
00268   printf(<span class="stringliteral">"tokenizer: done.\n"</span>);
00269 }
00270 
00271 <span class="comment">// ----- main -------------------------------------------------------</span>
<a name="l00275"></a><a class="code" href="main_8c.html#a10">00275</a> <span class="comment"></span><span class="keywordtype">int</span> <a class="code" href="main_8c.html#a10">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> * argv[])
00276 {
00277 <span class="preprocessor">#ifdef _CHECK_ARRAY_</span>
00278 <span class="preprocessor"></span>  <a class="code" href="main_8c.html#a1">test_array</a>();
00279 <span class="preprocessor">#endif</span>
00280 <span class="preprocessor"></span><span class="preprocessor">#ifdef _CHECK_PTR_ARRAY_</span>
00281 <span class="preprocessor"></span>  <a class="code" href="main_8c.html#a5">test_ptr_array</a>();
00282 <span class="preprocessor">#endif</span>
00283 <span class="preprocessor"></span><span class="preprocessor">#ifdef _CHECK_LIST_</span>
00284 <span class="preprocessor"></span>  <a class="code" href="main_8c.html#a6">test_list</a>();
00285 <span class="preprocessor">#endif</span>
00286 <span class="preprocessor"></span><span class="preprocessor">#ifdef _CHECK_RADIX_TREE_</span>
00287 <span class="preprocessor"></span>  <a class="code" href="main_8c.html#a8">test_radix_tree</a>();
00288 <span class="preprocessor">#endif</span>
00289 <span class="preprocessor"></span><span class="preprocessor">#ifdef _CHECK_TOKENIZER_</span>
00290 <span class="preprocessor"></span>  <a class="code" href="main_8c.html#a9">test_tokenizer</a>();
00291 <span class="preprocessor">#endif</span>
00292 <span class="preprocessor"></span>
00293   <span class="keywordflow">if</span> (<a class="code" href="memory_8c.html#a0">uAllocCount</a> &gt; 0)
00294     printf(<span class="stringliteral">"warning: memory leak (%lu)\n"</span>, <a class="code" href="memory_8c.html#a0">uAllocCount</a>);
00295 
00296   <span class="keywordflow">return</span> 0;
00297 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jul 30 15:56:47 2003 for GDS - Generic Data Structures by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.2 </small></address>
</body>
</html>
